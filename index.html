<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yajiro - Nivel 35</title>

<style>
body{
    margin:0;
    background: radial-gradient(circle at center, #1a0033, #000);
    overflow:hidden;
    font-family: monospace;
    color:#00ff88;
}

/* TERMINAL */
#terminal{
    position:absolute;
    top:0;
    width:100%;
    background:black;
    padding:15px;
    box-shadow:0 0 15px #00ff88;
    z-index:100;
    font-size:15px;
}

#progressBar{
    margin-top:10px;
    height:10px;
    background:#003322;
}

#progress{
    height:100%;
    width:0%;
    background:#00ff88;
}

/* BOT√ìN */
#startBtn{
    position:absolute;
    top:45%;
    left:50%;
    transform:translate(-50%,-50%);
    padding:15px 35px;
    font-size:20px;
    background:#ffcc00;
    border:none;
    cursor:pointer;
    display:none;
    box-shadow:0 0 20px #ffcc00;
    font-weight:bold;
}

/* ESCENA */
#scene{
    position:absolute;
    bottom:0;
    width:100%;
    height:70%;
}

/* TORRE */
#stack{
    position:absolute;
    bottom:20px;
    right:15%;
    width:120px;
    display:flex;
    flex-direction:column-reverse;
    align-items:center;
}

.block{
    width:70px;
    height:40px;
    background:#ffcc00;
    margin:2px;
    border:3px solid #aa8800;
    text-align:center;
    line-height:40px;
    font-weight:bold;
    color:#000;
}

/* PERSONAJE */
#character{
    position:absolute;
    bottom:20px;
    left:-120px;
    text-align:center;
    transition:transform .3s;
}

#guy{
    font-size:50px;
}

#cube{
    width:70px;
    height:40px;
    background:#ffcc00;
    border:3px solid #aa8800;
    line-height:40px;
    font-weight:bold;
    color:#000;
    margin:auto;
}

/* MENSAJE FINAL */
#finalMessage{
    position:absolute;
    top:50%;
    width:100%;
    text-align:center;
    font-size:40px;
    color:#ffcc00;
    opacity:0;
    transition:2s;
    text-shadow:0 0 20px #ffcc00;
}
</style>
</head>

<body>

<div id="terminal">
YAJIRO_OS v3.5<br>
---------------------------------------<br>
<div id="logs"></div>
<div id="progressBar"><div id="progress"></div></div>
</div>

<button id="startBtn">üéÅ Iniciar Entrega</button>

<div id="scene">
    <div id="stack"></div>

    <div id="character">
        <div id="cube">35</div>
        <div id="guy">üßç‚Äç‚ôÇÔ∏è</div>
    </div>
</div>

<div id="finalMessage">
üéâ NIVEL 35 DESBLOQUEADO üéâ<br>
Yajiro no suma a√±os‚Ä¶ acumula niveles.
</div>

<script>
const logsEl = document.getElementById("logs");
const progressEl = document.getElementById("progress");
const startBtn = document.getElementById("startBtn");
const stack = document.getElementById("stack");
const character = document.getElementById("character");
const cube = document.getElementById("cube");
const finalMessage = document.getElementById("finalMessage");

/* TERMINAL LOGS */
const logs = [
"> Usuario detectado: Yajiro",
"> Edad actual: 34",
"> Buscando actualizaci√≥n...",
"> Instalando m√≥dulo: Nivel_35.exe",
"> Cargando disciplina...",
"> Cargando experiencia...",
"> Cargando familia...",
"> Cargando batallas superadas...",
"> Preparando actualizaci√≥n...",
"> Sistema listo para recibir cumplea√±os."
];

let logIndex = 0;
let progress = 0;

function typeLogs(){
    if(logIndex < logs.length){
        logsEl.innerHTML += logs[logIndex] + "<br>";
        logIndex++;
        setTimeout(typeLogs, 600);
    }
}

function loadBar(){
    let interval = setInterval(()=>{
        progress+=2;
        progressEl.style.width = progress + "%";
        if(progress>=100){
            clearInterval(interval);
            startBtn.style.display="block";
        }
    },60);
}

typeLogs();
loadBar();

/* CREAR TORRE HASTA 34 */
for(let i=1;i<=34;i++){
    let block = document.createElement("div");
    block.className="block";
    block.innerText=i;
    stack.appendChild(block);
}

/* MOVIMIENTO */
let pos=-120;

function move(){
    pos+=2;
    character.style.left=pos+"px";

    if(pos>window.innerWidth*0.55){
        placeCube();
        return;
    }
    requestAnimationFrame(move);
}

function placeCube(){
    character.style.transform="translateY(-30px)";
    setTimeout(()=>{
        character.style.transform="translateY(0)";
        stack.appendChild(cube);
        cube.classList.add("block");
        cube.style.background="#00ff88";
        cube.style.boxShadow="0 0 20px #00ff88";
        showFinal();
        playSound();
    },400);
}

function showFinal(){
    setTimeout(()=>{
        finalMessage.style.opacity=1;
    },800);
}

/* SONIDO LEVEL UP */
function playSound(){
    const ctx=new (window.AudioContext||window.webkitAudioContext)();
    function tone(freq,time){
        const osc=ctx.createOscillator();
        const gain=ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.frequency.value=freq;
        osc.type="square";
        gain.gain.setValueAtTime(0.05,ctx.currentTime);
        osc.start(ctx.currentTime);
        osc.stop(ctx.currentTime+time);
    }
    tone(523,0.15);
    setTimeout(()=>tone(659,0.15),150);
    setTimeout(()=>tone(784,0.2),300);
}

/* INICIAR */
startBtn.addEventListener("click",()=>{
    startBtn.style.display="none";
    document.getElementById("terminal").style.display="none";
    move();
});
</script>

</body>
</html>
